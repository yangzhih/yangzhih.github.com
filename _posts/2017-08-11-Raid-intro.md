---
layout: post
title: "Raid技术简单介绍"
description: "Raid技术简单介绍"
category: articles
tags: [linux,Raid，存储]
comments: false
---

## Raid是什么？

&ensp;&ensp;&ensp;&ensp;独立磁盘冗余阵列(RAID, Redundant Array of Independent Disks)，在早期也称为廉价磁盘冗余阵列，简称为磁盘阵列。Raid就是将两个以上的物理磁盘在逻辑上捆绑在一起，数据以条带式的形式顺序保存在各个磁盘上，对外作为一个逻辑的设备提供服务。磁盘阵列中可包含配置成Raid的磁盘和用于后备的磁盘。<br/>
&ensp;&ensp;&ensp;&ensp;简单来说，RAID把多个物理硬盘组合成为一个逻辑磁盘，因此，操作系统只会把一个raid阵列当作一个硬盘。RAID常被用在服务器计算机上，并且常使用完全相同的硬盘作为组合。由于硬盘价格的不断下降与RAID功能更加有效地与主板集成，它也成为了玩家的一个选择，特别是需要大容量存储空间的工作。<br/>
&ensp;&ensp;&ensp;&ensp;最初的RAID分成了不同的等级，每种等级都有其理论上的优缺点，不同的等级在两个目标间取得平衡，分别是增加数据可靠性以及增加存储器（集群）读写性能。常见RAID级别分为RAID-0，RAID-1，RAID-5，RAID-6，RAID-1E，RAID-10，RAID-50，RAID-60。<br/>
&ensp;&ensp;&ensp;&ensp;Raid可以按照不同的标准进行分类。按照其实现方法分类可分为硬件Raid和软件Raid。硬件Raid的主要特点是其I/O处理有专门的IOP(IO处理器)来执行；软件Raid的I/O指令从主机的CPU获得。根据不同的链接方式，Raid又可分为外接式和内置式。<br/>

## Raid级别简介

### Raid0

![](http://ot9scj6tc.bkt.clouddn.com/Raid0.jpg)

将多个磁盘合并成一个大的磁盘，不具有冗余，并行I/O，速度最快。RAID 0亦称为带区集。它是将多个磁盘并列起来，成为一个大磁盘。在存放数据时，其将数据按磁盘的个数来进行分段，然后同时将这些数据写进这些盘中，所以在所有的级别中，RAID 0的速度是最快的。但是RAID 0没有冗余功能，如果一个磁盘（物理）损坏，则所有的数据都会丢失，危险程度与JBOD相当。

理论上越多的磁盘性能就等于“单一磁盘性能”×“磁盘数”，但实际上受限于总线I/O瓶颈及其它因素的影响，RAID性能会随边际递减，也就是说，假设一个磁盘的性能是50MB每秒，两个磁盘的RAID 0性能约96MB每秒，三个磁盘的RAID 0也许是130MB每秒而不是150MB每秒。 可使用容量是硬盘总数乘以单块硬盘的最小容量：Size=（N）*min（S1，S2，S3...Sn）


### Raid 1

![](http://ot9scj6tc.bkt.clouddn.com/Raid1.jpg)
RAID1是将一个两块硬盘所构成RAID磁盘阵列，其容量仅等于一块硬盘的容量，因为另一块只是当作数据“镜像”。RAID 1磁盘阵列显然是最可靠的一种阵列，因为它总是保持一份完整的数据备份。它的性能自然没有RAID 0磁盘阵列那样好，但其数据读取确实较单一硬盘来的快，因为数据会从两块硬盘中较快的一块中读出。RAID 1磁盘阵列的写入速度通常较慢，因为数据得分别写入两块硬盘中并做比较。RAID 1磁盘阵列一般支持“热交换”，就是说阵列中硬盘的移除或替换可以在系统运行时进行，无须中断退出系统。RAID 1磁盘阵列是十分安全的，不过也是较贵一种RAID磁盘阵列解决方案，因为两块硬盘仅能提供一块硬盘的容量。RAID 1磁盘阵列主要用在数据安全性很高，而且要求能够快速恢复被破坏的数据的场合。


### Raid 5

![](http://ot9scj6tc.bkt.clouddn.com/Raid5.jpg)
RAID Level 5是一种储存性能、数据安全和存储成本兼顾的存储解决方案。它使用的是Disk Striping技术。RAID 5至少需要三颗硬盘，RAID 5不是对存储的数据进行备份，而是把数据和相对应的奇偶校验信息存储到组成RAID5的各个磁盘上，并且奇偶校验信息和相对应的数据分别存储于不同的磁盘上。当RAID5的一个磁盘数据发生损坏后，可以利用剩下的数据和相应的奇偶校验信息去恢复被损坏的数据。RAID 5可以理解为是RAID 0和RAID 1的折衷方案。RAID 5可以为系统提供数据安全保障，但保障程度要比镜像低而磁盘空间利用率要比镜像高。RAID 5具有和RAID 0相近似的数据读取速度，只是因为多了一个奇偶校验信息，写入数据的速度相对单独写入一块硬盘的速度略慢，若使用“回写高速缓存”可以让性能改善不少。同时由于多个数据对应一个奇偶校验信息，RAID 5的磁盘空间利用率要比RAID 1高，存储成本相对较便宜。
可使用的容量为硬盘总数减去1的差，乘以单块硬盘的最小容量，公式为Size=（N-1）*min（S1，S2，S3...Sn）

### Raid 6

![](http://ot9scj6tc.bkt.clouddn.com/Raid6.jpg)
与RAID 5相比，RAID 6增加了第二个独立的奇偶校验信息块。两个独立的奇偶系统使用不同的算法，数据的可靠性非常高，即使两块磁盘同时失效也不会影响数据的使用。但RAID 6需要分配给奇偶校验信息更大的磁盘空间，相对于RAID 5有更大的“写损失”，因此“写性能”非常差。较差的性能和复杂的实作方式使得RAID 6很少得到实际应用。

同一数组中最多容许两个磁盘损坏。更换新磁盘后，数据将会重新算出并写入新的磁盘中。依照设计理论，RAID 6必须具备四个以上的磁盘才能生效。

可使用的容量为硬盘总数减去2的差，乘以单块硬盘的最小容量，公式为Size=（N-2）*min（S1，S2，S3...Sn）


### Raid 10

![](http://ot9scj6tc.bkt.clouddn.com/Raid10.jpg)

RAID 1与RAID 0的组合，先作RAID 1，再作RAID 0，也就是对多组RAID 1彼此构成Stripe访问。由于RAID 10是以RAID 1为基础，而RAID 1至少需要2块硬盘，因此要以多组RAID 1构成RAID 10，至少需要4块硬盘。以RAID 10最小的4台硬盘组态为例，先把4台硬盘分为2组，每组2台构成RAID 1，如此就得到两组RAID 1，然后再把两组RAID 1构成RAID 0。

RAID 10在底层的任一组或多组RAID 1中出现1台硬盘损坏时，仍能维持运作，不过如果任一组RAID 1中的两块硬盘损毁，整组RAID10就会失效。

RAID 10由于在上层把多组RAID 1构成Stripe，容量利用率是50%，例如：4块硬盘做的raid10的总容量是两块硬盘的容量。

### Raid 1E


<img src="http://ot9scj6tc.bkt.clouddn.com/Raid1E.png" width="500px" />



RAID-1E:(也叫做混合型或者增强型RAID1)以镜像的方式将数据分条带分布存储于各硬盘上。由IBM公司提出的一种私有RAID级别，没有成为国际标准。它并不是我们通常所说的RAID 0+1的组合。RAID 1E的工作原理与RAID1基本上是一样的，只是RAID 1E的数据恢复能力更强，但由于RAID 1E写一份数据至少要两次，因此，RAID处理器的负载被增强，从而造成磁盘读写能力的下降。RAID 1E至少需要3块硬盘才能实现。RAID1E整合了镜象和数据条带。该阵列级别的数据条带及数据备份贯穿在逻辑盘中所有的硬盘当中。跟RAID1一样，数据是镜象的，逻辑盘的容量是硬盘总容量的一半。RAID1E跟RAID1类似，它能提供数据冗余及高的性能，但存储容量减少。然而，RAID1E允许使用更多的物理硬盘。

### Raid 50

![](http://ot9scj6tc.bkt.clouddn.com/Raid50.jpg)

RAID 5与RAID 0的组合，先作RAID 5，再作RAID 0，也就是对多组RAID 5彼此构成Stripe访问。由于RAID 50是以RAID 5为基础，而RAID 5至少需要3台硬盘，因此要以多组RAID 5构成RAID 50，至少需要6台硬盘。以RAID 50最小的6台硬盘组态为例，先把6台硬盘分为2组，每组3台构成RAID 5，如此就得到两组RAID 5，然后再把两组RAID 5构成RAID 0。

RAID 50在底层的任一组或多组RAID 5中出现1台硬盘损坏时，仍能维持运作，不过如果任一组RAID 5中出现2台或两台以上硬盘损毁，整组RAID 50就会失效。

RAID 50由于在上层把多组RAID 5构成Stripe，性能比起单纯的RAID 5高，容量利用率比RAID5要低。比如同样9块硬盘，RAID 50则3个RAID 5组成RAID 0，每个RAID 5会损失一块硬盘的容量，利用率为(1-3/9)，RAID 5则为(1-1/9)。

### Raid 60

![](http://ot9scj6tc.bkt.clouddn.com/Raid60.jpg)

RAID 6与RAID 0的组合：先作RAID 6，再作RAID 0。换句话说，就是对两组以上的RAID 6作Stripe访问。RAID 6至少需具备4块硬盘，所以RAID 60的最小需求是8块硬盘。

由于底层是以RAID 6组成，所以RAID 60可以容许任一组RAID 6中损毁最多2块硬盘，而系统仍能维持运作；不过只要底层任一组RAID 6中损毁3块硬盘，整组RAID 60就会失效，当然这种情况的机率相当低。

比起单纯的RAID 6，RAID 60的上层通过结合多组RAID 6构成Stripe访问，因此性能较高。不过使用门槛高，而且容量利用率低是较大的问题